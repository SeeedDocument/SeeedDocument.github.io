<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@seeedstudio">
  <meta property="og:title" content="Wi-Fi Shield - Seeed Wiki">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://wiki.seeed.cc/Wifi_Shield_V2.0.1/">
  <meta property="og:image" content="http://statics3.seeedstudio.com/images/product/113030008 1.jpg">
    
  
  <meta name="author" content="Seeedstudio Team">
  
  <title>Wi-Fi Shield - Seeed Wiki</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link rel="stylesheet" href="../css/highlight-fix.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/tomorrow-night-eighties.min.css">
  <link rel="stylesheet" href="../css/font-awesome-4.5.0/css/font-awesome.min.css?v=4fbd15">
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/wiki.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Wi-Fi Shield";
    var mkdocs_page_input_path = "Wifi_Shield_V2.0.1.md";
    var mkdocs_page_url = "/Wifi_Shield_V2.0.1/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84917600-1', 'auto');
  ga('send', 'pageview');
  </script>

</head>

<body class="wy-body-for-nav" role="document" style="overflow: hidden;">
  <div id="header" class="header" >
    <div class="w100p nav-shadow">
         <nav class="main-nav  center clear c-10 rel">
              <a href="../" title="seeed" class="logo fl"><img src="//www.seeedstudio.com/img/logo.png" alt=""></a>
              <div class="user-act">
                  <a href="https://www.seeedstudio.com" class="item fl " title="Bazaar" target="_self">Bazaar</a>
                  <div class="nav-layer j-fusion-nav rel">
                      <a href="https://www.seeedstudio.com/fusion.html" class="item fl j-shadaw rel">Fusion
                          <img src="//statics3.seeedstudio.com/assets/img/bazaar/ico_sales_02.svg" class="header-sales-ico" alt="">
                          <span class="op-layer"></span>
                      </a>
                      <ul class="child-nav list-1">
                         <li><a href="https://www.seeedstudio.com/fusion_pcb.html" title="Fusion PCB/PCBA" target="_self">Fusion PCB/PCBA</a></li>
                         <!-- <li><a href="http://www.seeedstudio.com/service/index.php?r=SharedGerber" title="Fusion Gallerynew" target="_self">Fusion Gallery</a></li> -->
                         <li><a href="http://www.seeedstudio.com/opl.html" title="Fusion OPL" target="_self">OPL</a></li>
                         <li><a href="../stencil.html" title="PCB Stencil Service" target="_self">PCB Stencil Service</a></li>
               <!--            <li><a href="http://www.seeedstudio.com/service/index.php?r=badge" title="Electronic Badge" target="_self">Electronic Badge</a></li> -->
                        <!--   <li><a href="http://www.seeedstudio.com/service/index.php?r=st/lasercutting" title="Laser Cutting Service" target="_self">Laser Cutting Service</a></li> -->
                       <!--    <li><a href="http://www.seeedstudio.com/service/index.php?r=st/3d" title="3D Printing" target="_self">3D Printing</a></li>
                          <li><a href="http://www.seeedstudio.com/service/index.php?r=cnc"  title="CNC Milling" target="_self">CNC Milling</a></li> -->
                          <li><a href="http://support.seeedstudio.com/knowledgebase/topics/62840-fusion-specification" title="Specification" target="_self">Specification</a></li>
                          <li><a href="../fpcb.html" title="Flexible PCB" target="_self">Flexible PCB</a></li>
                          <li><a href="http://www.seeedstudio.com/depot/index.php?main_page=become_a_distributor#Fusion"></a></li>
                          <li><a href="http://support.seeedstudio.com/knowledgebase/topics/63002-fusion-faq" title="FAQ" target="_self">FAQ</a></li>
                          <li><a href="http://www.seeedstudio.com/distributors-affiliate.html" title="FAQ" target="_self" style="width: 100%;">Become a Fusion Distributor</a></li>
                          <li><a href="http://www.seeedstudio.com/pcb-layout-service.html">Layout Service</a></li>
                      </ul>
                  </div>
                  <a href="http://www.seeedstudio.com/propagate/" class="item fl" title="Propogate" target="_self">Propagate</a>
                  <div class="nav-layer rel">
                      <a href="https://www.seeed.cc/" class="item fl rel">Community
                          <span class="op-layer"></span>
                      </a>
                      <ul class="child-nav list-2">
                          <li><a href="//www.seeedstudio.com/blog" title="Blog" target="_self">Blog</a></li>
                          <li><a href="https://www.seeed.cc/" title="Forum" target="_self">Forum</a></li>
                          <li><a href="https://www.seeed.cc/" title="Recipe" target="_self">Recipe</a></li>
                      </ul>
                  </div>
                  <a href="http://wiki.seeedstudio.com/wiki/Main_Page" class="item fl active" title="Propogate" target="_self">Wiki</a>
             </div>

          </nav>
      </div>


   </div>
  
  
  <div class="" style="background: #fff;margin: 0 auto;
    max-width: 1200px;
    position: absolute;
    z-index: 0;
    height: 88%;
    top: 61px;" >

      
      <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
        <div class="wy-side-nav-search">
          <!-- <a href=".." class="icon icon-home"> Seeed Wiki</a> -->
          <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
<!--     <input type="text" name="q" placeholder="Search docs" />
 -->
    <div class="search-bar">
            <input type="text" class="c-9b search-input pl40" id="g-search" placeholder="Search Wiki" value="">
            <a href="javascript:void(0)" class="btn-search js-btn-search"><img src="//www.seeedstudio.com/img/svg/search.svg"></a>
    </div> 


  </form>
</div>
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <ul class="current">
            
              <li class="C">

    <li class="m-title toctree-l1 " >
        <a class="" href="..">Home</a>
        
    </li>
<li>
            
              <li class="C">

    <li class="m-title toctree-l1 " >
        <a class="" href="../Grove-OLED_Display_1.12inch_new/">Grove - OLED Display 1.12`` NEW</a>
        
    </li>
<li>
            
              <li class="C">

    <li class="m-title toctree-l1 current" >
        <a class="current" href="./">Wi-Fi Shield</a>
        
            <ul>
            <li class="toctree-l3"><a href="#introduction">Introduction</a></li>
            
                <li class="toctree-l3"><a href="#basic-information" class="sub-title">BASIC INFORMATION</a></li>
                <!--  -->
            
                <li class="toctree-l3"><a href="#whats-new" class="sub-title">WHAT'S NEW</a></li>
                <!--  -->
            
                <li class="toctree-l3"><a href="#hardware-overview" class="sub-title">HARDWARE OVERVIEW</a></li>
                <!--  -->
            
                <li class="toctree-l3"><a href="#why-choose-us" class="sub-title">WHY CHOOSE US</a></li>
                <!-- 
                    <li class="toctree-l4"><a  href="#what-makes-this-product-different-from-others" class="sub-title" >what makes this product different from others</a></li>
                 -->
            
                <li class="toctree-l3"><a href="#how-to-use" class="sub-title">HOW TO USE</a></li>
                <!-- 
                    <li class="toctree-l4"><a  href="#basic-setup-steps" class="sub-title" >BASIC SETUP STEPS</a></li>
                 -->
            
                <li class="toctree-l3"><a href="#wifi-shield-v20-tutorial" class="sub-title">WIFI SHIELD V2.0 TUTORIAL</a></li>
                <!-- 
                    <li class="toctree-l4"><a  href="#basic-functions" class="sub-title" >basic functions:</a></li>
                
                    <li class="toctree-l4"><a  href="#basic-example" class="sub-title" >BASIC EXAMPLE</a></li>
                
                    <li class="toctree-l4"><a  href="#advanced-example" class="sub-title" >Advanced example</a></li>
                 -->
            
                <li class="toctree-l3"><a href="#resources" class="sub-title">Resources</a></li>
                <!--  -->
            
            <li class="toctree-l3"><a href="#help-us-make-it-better">Help us make it better</a></li>
            </ul>
        
    </li>
<li>
            
              <li class="C">

    <li class="m-title toctree-l1 " >
        <a class="" href="../acc/">Grove-3-Axis Digital Accelerometer(±400g)</a>
        
    </li>
<li>
            
          </ul>
        </div>
        &nbsp;
      </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Seeed Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> /</li>
    
      
    
    <li>Wi-Fi Shield</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/SeeedDocument/Seeed-Wiki/" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1>Wifi Shield V2.0</h1>
                <h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h2>
   
                <p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Wifi_Shield_v2.jpg" /></p>
<h3 id="basic-information">BASIC INFORMATION<a class="headerlink" href="#basic-information" title="Permanent link"></a></h3>
<p>this module name is &lsquo;Wifi Shield V2.0&rsquo;, that enables your Arduino/Seeeduino board with the cool wifi connection capability. Equipped with the RN171 module, which is a complete standalone TCP/IP wireless 
network module. We choose it all because it is prefect for wireless application such as assets monitoring, sensors, and portable battery operated devices. We are looking forward to the products you could 
build with our &lsquo;Wifi Shield V2.0&rsquo; leverage its incredible low power consumption, and awesome configurable transmit power that you could adjust the signal power strong or weak based on your user cases.</p>
<h3 id="whats-new">WHAT&rsquo;S NEW<a class="headerlink" href="#whats-new" title="Permanent link"></a></h3>
<p>Seeedstudio always cares about your hacking experience, saving your energy on wiring and unnecessary accessories so that you could focus on core applications really matters. Our hardware team shapes the 
&lsquo;Wifi Shield V2.0&rsquo; with Standard Shield and on-board antenna, so that you could &lsquo;plug and play&rsquo; with our amazing &lsquo;Wifi Shield V2.0&rsquo;. Our on-board antenna allows the shield to cover a wider range and 
transmit stronger signals. Our &lsquo;Wifi Shield V2.0&rsquo; supports TCP, UDP, FTP, and HTTP communication protocols to meet the needs of most wireless and Internet of Things (IoT) network projects e.g. smart home 
networks, robots control, personal weather stations. </p>
<p><a href="http://www.seeedstudio.com/depot/Wifi-Shield-V20-p-2505.html"><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/common/master/Get_One_Now_Banner.png" /></a></p>
<h2 id="hardware-overview">HARDWARE OVERVIEW<a class="headerlink" href="#hardware-overview" title="Permanent link"></a></h2>
<p><a href="https://raw.githubusercontent.com/loovee/wifi_shield/master/img/wifi_shield_v2.0.png"><img alt="" src="https://raw.githubusercontent.com/loovee/wifi_shield/master/img/wifi_shield_v2.0.png" /></a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The operating voltage of the RN-171 module is <strong>3.3V</strong>DC typically, so a voltage regulator and logic level translator are designed on the WiFi shield. The LD1117 regulator on the shield converts to 3.3VDC, which supplies the RN171 module. However, due to the auto judgement schematic of power supply, the RN-171 can be powered via both 3V3 pin and 5V pin. But the supply power would be 5v if providing both 3.3v and 5v to the board. If using with an Arduino/Seeeduino board simply stack the WiFi shield on the board.</p>
</div>
<h2 id="why-choose-us">WHY CHOOSE US<a class="headerlink" href="#why-choose-us" title="Permanent link"></a></h2>
<p>Seeedstudio is one of the largest open source hardware distributors, with high quality, cost effective, varies of open source products and great customer services. And most important we care about every 
customer. We are willing to learn from you and improve your every hacking experience by making perfect products of our time.</p>
<h3 id="what-makes-this-product-different-from-others">what makes this product different from others<a class="headerlink" href="#what-makes-this-product-different-from-others" title="Permanent link"></a></h3>
<p>Among all of the Arduino Shields in the market, &lsquo;Wifi Shield V2.0&rsquo; is one of a kind. It&rsquo;s the combination of conciseness and multi-functionality that we could have so many function just in one Shield with
all of the flexibilities. It&rsquo;s such a good deal to enable your Arduino applications with this cost effective solution, so that you could easily scale out your products with a more competitive price point.</p>
<h2 id="how-to-use">HOW TO USE<a class="headerlink" href="#how-to-use" title="Permanent link"></a></h2>
<p>As we just said, it&rsquo;s very easy to get start with the &lsquo;Wifi Shield V2.0&rsquo;. We have provided a helpful library to assist you to interact with the Wifi Shield, with examples to let you walk through the main 
functions of the Shield.</p>
<h3 id="basic-setup-steps">BASIC SETUP STEPS<a class="headerlink" href="#basic-setup-steps" title="Permanent link"></a></h3>
<p>First thing first, we need to understand the basics of the Shield. How to find whether it&rsquo;s working fine or not? How to configure the board based on your special needs?</p>
<h4 id="how-to-find-whether-its-working-fine-or-not-led-indicators">How to find whether it&rsquo;s working fine or not? &ndash; LED indicators<a class="headerlink" href="#how-to-find-whether-its-working-fine-or-not-led-indicators" title="Permanent link"></a></h4>
<p>We find it is the best way to indicate how the Sheild is performing by adding LED indicators for our customers. We have listed the LED indicators in the table below:</p>
<table>
<thead>
<tr>
<th>Label</th>
<th>Description</th>
<th>Status</th>
<th>Hardware Connection</th>
</tr>
</thead>
<tbody>
<tr>
<td>D5</td>
<td>Green LED. Indicates the association status.</td>
<td><strong>OFF:</strong><br>means the module is not associated with a network.<br><strong>Solid ON:</strong><br>indicates that it is associated and Internet access is OK</td>
<td>Connected to GPIO6 of the RN171 module</td>
</tr>
<tr>
<td>D1</td>
<td>Red LED. Indicates the TCP/IP connection status.</td>
<td><strong>Solid ON: </strong><br>connected over TCP.<br><strong>Fast Toggle (2 times/second): &ldquo;</strong><br>No IP address or module is in command mode.<br><strong>Slow Toggle (once/second):</strong><br>IP address is OK.</td>
<td>Connected to GPIO4 of the RN171 module</td>
</tr>
<tr>
<td>RST</td>
<td>Red LED. WiFi module reset status.</td>
<td><strong>Solid ON:</strong> The reset button (WIFI_RST) is been pressed.</td>
<td>Connected to Reset of the RN171 module.</td>
</tr>
<tr>
<td>PWR</td>
<td>Green LED. <br>Indicates WiFi module&rsquo;s power up status.</td>
<td><strong>Solid ON:</strong> <br>The module/shield is powered up.</td>
<td>Connected to the 3.3V output of the LD1117 voltage regulator.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The GPIO6 pin of the RN171 WiFi module is by default only connected to the LED labeled D5 on the WiFi shield. This LED is used to display the status of the Access Point (AP) 
connection. If however, you would like to connect GPIO6 to digital pin 5 of the Arduino, simply solder the pad labeled &ldquo;P6&rdquo; on the WiFi shield.</p>
</div>
<h2 id="wifi-shield-v20-tutorial">WIFI SHIELD V2.0 TUTORIAL<a class="headerlink" href="#wifi-shield-v20-tutorial" title="Permanent link"></a></h2>
<h3 id="basic-functions">basic functions:<a class="headerlink" href="#basic-functions" title="Permanent link"></a></h3>
<h4 id="join">join()<a class="headerlink" href="#join" title="Permanent link"></a></h4>
<ul>
<li><strong>Description:</strong><ul>
<li>Used to join a WiFi access point</li>
</ul>
</li>
<li><strong>Syntax:</strong><ul>
<li>join(const char <em>ssid, const char </em>phrase, int auth)</li>
</ul>
</li>
<li><strong>Parameters:</strong><ul>
<li><strong>ssid:</strong> The name of the access point you want the shield to connect to</li>
<li><strong>phrase:</strong> The password/phrase of the access point you want the shield to connect to</li>
<li><strong>auth:</strong> The authentication type of the access point you want the shield to connect to. Can be one of the following constants:<ul>
<li>WIFLY_AUTH_OPEN</li>
<li>WIFLY_AUTH_WEP</li>
<li>WIFLY_AUTH_WPA1</li>
<li>WIFLY_AUTH_WPA1_2</li>
<li>WIFLY_AUTH_WPA2_PSK</li>
<li>WIFLY_AUTH_ADHOC</li>
</ul>
</li>
</ul>
</li>
<li><strong>Returns:</strong><ul>
<li><strong>boolean:</strong> true if the connection to the access point was successful, false otherwise.</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The examples is based on Arduino UNO and we take D2/D3 as the SoftwareSerial pins. If you are using an Arduino Mega, D2 is not available anymore. More details please refer to <a href="https://www.arduino.cc/en/Tutorial/SoftwareSerialExample">Arduino Software Serial</a>
Here&rsquo;s an example.</p>
</div>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/connect_mega.jpg" /></p>
<h4 id="receive">receive()<a class="headerlink" href="#receive" title="Permanent link"></a></h4>
<ul>
<li><strong>Description:</strong><ul>
<li>Can be used to read data from the shield, an alternative for the Arduino&rsquo;s read() function.</li>
</ul>
</li>
<li><strong>Syntax:</strong><ul>
<li>receive(uint8_t *buf, int len, int timeout)</li>
</ul>
</li>
<li><strong>Parameters:</strong><ul>
<li><strong>buf:</strong> A buffer array where the bytes read from the shield is stored.</li>
<li><strong>len:</strong> The length/size of the buffer array</li>
<li><strong>timeout:</strong> A timeout value to know when to stop trying to read.</li>
</ul>
</li>
<li><strong>Returns:</strong><ul>
<li><strong>int:</strong> The number of bytes read from the shield.</li>
</ul>
</li>
<li><strong>Example:</strong></li>
</ul>
<pre><code class="c">char c;
while (wifly.receive((uint8_t *)&amp;c, 1, 300) &gt; 0) {
    Serial.print((char)c);
}
</code></pre>

<h4 id="sendcommand">sendCommand()<a class="headerlink" href="#sendcommand" title="Permanent link"></a></h4>
<ul>
<li><strong>Description:</strong><ul>
<li>Some our functions (e.g. join(), reboot(), save()) act as wrappers for the text commands listed in the user manual of the RN171 module. The function sendCommand() allows you to come up with your own wrapper function if ours do not meet your needs.</li>
</ul>
</li>
<li><strong>Syntax:</strong><ul>
<li>sendCommand(const char <em>cmd, const char </em>ack, int timeout)</li>
</ul>
</li>
<li><strong>Parameters:</strong><ul>
<li><strong>cmd:</strong> Any command from the RN-171&rsquo;s user manual.</li>
<li><strong>ack:</strong> The expected return string from the command</li>
<li><strong>timeout:</strong> The time allowed before considering the output a bad request/response</li>
</ul>
</li>
<li>
<p><strong>Returns:</strong></p>
<ul>
<li><strong>boolean:</strong> true if the WiFi shield responded with the ack string, false otherwise.</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
</li>
</ul>
<pre><code class="c">// our join() function is wrapper for the join command, as seen below.
//The string &quot;Associated&quot; is what the user manual says the RN171 will return on success.
if(sendCommand(&quot;join\r&quot;, &quot;Associated&quot;,DEFAULT_WAIT_RESPONSE_TIME*10))
{
    // joined
}else{
    // not able to join
}
</code></pre>

<h3 id="basic-example">BASIC EXAMPLE<a class="headerlink" href="#basic-example" title="Permanent link"></a></h3>
<h4 id="example-1-easy-connect-to-your-home-wifi">Example 1 [EASY]: connect to your home WIFI<a class="headerlink" href="#example-1-easy-connect-to-your-home-wifi" title="Permanent link"></a></h4>
<pre><code>See File-&gt;Examples-&gt;WiFi_Shield-&gt;wifly_test sketch for a complete example.
</code></pre>
<h4 id="example-2-easy-send-command-to-wifi_shield_v20-and-receive-response-via-arduino-serial-monitor">Example 2 [EASY]: send command to &ldquo;WIFI_SHIELD_V2.0&rdquo; and Receive Response Via Arduino Serial Monitor<a class="headerlink" href="#example-2-easy-send-command-to-wifi_shield_v20-and-receive-response-via-arduino-serial-monitor" title="Permanent link"></a></h4>
<p>This example will show you how a device such as your PC and/or phone may talk to the WiFi shield.</p>
<p>Follow these steps:</p>
<ol>
<li>Configure the module with step1-7 in Example 2&rsquo;s section <em>Connecting By Typing Commands</em></li>
<li>Set the listening IP port to &ldquo;80&rdquo; by sending the commands &ldquo;set ip local 80&rdquo;</li>
<li>Connect/Join your shield to an access point as shown in the step 8 in Example 2&rsquo;s section <em>Connecting By Typing Commands</em></li>
<li>Save these setting by sending the &ldquo;save&rdquo; command</li>
<li>Get the IP address of your shield with the command &ldquo;get ip&rdquo;. The IP address and port will be displayed to the right of &ldquo;IP=&rdquo; in the response (e.g. IP=192.168.0.10:80)</li>
<li>Open your web browser and type your shield&rsquo;s IP address in your web browser&rsquo;s URL bar and press Enter to visit it.</li>
<li>Your Arduino&rsquo;s serial monitor window will display an HTTP response similar to the one below. This is the information that your browser sent to the shield to request data.</li>
</ol>
<pre><code>*OPEN*GET / HTTP/1.1
Host: 192.168.0.10
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36
Accept-Encoding: gzip, deflate, sdch
Accept-Language: en-US,en;q=0.8
</code></pre>

<p>The browser is now waiting for data, the Wifi module can send sensor values, serve web pages, or any other data straight back to the browser! In this case, the browser is waiting for a web page. If the Wifi module responds with an HTML-formatted page, the browser will display it. The next examples will teach you how to do all this fun stuff.</p>
<h4 id="example-3-easy-send-an-http-request-from-your-pc-to-your-wifi_shield_v20">example 3 [EASY]: send an HTTP request from your PC to your &ldquo;WIFI_SHIELD_V2.0&rdquo;<a class="headerlink" href="#example-3-easy-send-an-http-request-from-your-pc-to-your-wifi_shield_v20" title="Permanent link"></a></h4>
<p>In this example we will show you how to connect the WiFi shield to an access point (your internet router) with and without you typing the commands required:</p>
<h4 id="connecting-by-typing-commands">Connecting By Typing Commands<a class="headerlink" href="#connecting-by-typing-commands" title="Permanent link"></a></h4>
<p>This section will teach you how to connect the WiFi shield to an access point using commands from the RN-171 datasheet, by going through this section you will then know exactly what is happening in the background when you use our WiFi Arduino libraries.</p>
<p>Do the following:</p>
<ol>
<li>Upload the code in Example One to your Arduino board</li>
<li>
<p><strong>Enter command mode:</strong></p>
<ol>
<li>Set the serial monitor to “No line ending”, baud rate to 9600.</li>
<li>Type <em>$$$</em> into the Arduino Serial Monitor and press enter.</li>
</ol>
</li>
<li>
<p>Set the serial monitor to “Carriage return”.</p>
</li>
<li>
<p><strong>Scan for available access points:</strong></p>
<ol>
<li>Type <em>scan</em> and press enter. The Arduino serial monitor window will output a list of comma separated values for each access point the WiFi shield has found. From left to right the third value is the security mode, the last value is the SSID. This example shows a security mode of 4 with an SSID name MySSID: 01,01,-88,<strong>04</strong>,1104,1c,00,45:56:78:be:93:1f,<strong>MySSID</strong></li>
</ol>
</li>
<li>
<p>From the list of access points found, find the one which corresponds to your internet router and note the security mode, and SSID as we will need these two values to connect to it.</p>
</li>
<li>
<p><strong>Set the security mode in the shield:</strong></p>
<ol>
<li>Type <em>set wlan auth m</em>. Replace <em>m</em> with the security mode number (in this example that would be 4) of the access point you wish to connect to.</li>
<li>The security modes supported by the WiFi shield are listed in Figure 1 below.</li>
</ol>
</li>
<li>
<p><strong>Set the access point phrase</strong></p>
<ol>
<li>
<p>Type <em>set wlan phrase myPhrase</em>. Replace <em>myPhrase</em> with your access point&rsquo;s password/security key. 
<div class="admonition note">
<p class="admonition-title">Note</p>
If your access point&rsquo;s security type is WEP use <em>key</em> instead of <em>phrase</em> in the command above.
</div></p>
</li>
<li>
<p>The access point&rsquo;s (internet router) phrase is the password you use to connect to it from your PC. In Windows you can find it as shown in the animated image below:
    <img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/How_to_find_network_security_key_password.gif" />
    How to find a networks&rsquo; security key/password</p>
</li>
</ol>
</li>
<li>
<p><strong>Join the access point</strong></p>
<ol>
<li>Now that we have set the security type and phrase of the access point, we may connect to it.</li>
<li>Type <em>join MySSID</em>. Replace MySSID with your access point&rsquo;s broadcast name.</li>
<li>The word &ldquo;Associated!&rdquo; will be displayed in the Arduino serial monitor window if successful.</li>
</ol>
</li>
</ol>
<p>A description of the commands you entered in the steps above is available in the table below. A more detailed description of each command can be found in the RN171&rsquo;s user manual.</p>
<table>
<thead>
<tr>
<th>Number</th>
<th>Commands</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>scan</td>
<td>This command performs an active probe scan of access points on all 13 channels. When you use this command, the module returns the MAC address, signal strength, SSID name, and security mode of the access points it finds.</td>
</tr>
<tr>
<td>2</td>
<td>set wlan auth 4</td>
<td>Find the value that corresponds to the security protocol on your access point. Then, tell the WiFly what security protocol to use, it is the number shown in <strong>Figure 1</strong> that corresponds to the access point&rsquo;s security protocol. Here we choose “4”.</td>
</tr>
<tr>
<td>3</td>
<td>set wlan phrase seeed-mkt</td>
<td>Tell the WiFi shield your passphrase.</td>
</tr>
<tr>
<td>4</td>
<td>join SEEED-MKT</td>
<td>Tell the WiFi shield to join, “SEEED-MKT“ is the name of the access point we choose to connect. After sending the command the module should now connect and print out information about the connection. (If the connection is failed, try to send the command again until it works )</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Value</th>
<th>Authentication Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Open (Default)</td>
</tr>
<tr>
<td>1</td>
<td>WEP-128</td>
</tr>
<tr>
<td>2</td>
<td>WPA1</td>
</tr>
<tr>
<td>3</td>
<td>Mixed WPA1 and WPA2-PSK</td>
</tr>
<tr>
<td>4</td>
<td>WPA2-PSK</td>
</tr>
<tr>
<td>5</td>
<td>Not used</td>
</tr>
<tr>
<td>6</td>
<td>AD hoc mode (join any ad hoc network)</td>
</tr>
<tr>
<td>8</td>
<td>WPE-64</td>
</tr>
</tbody>
</table>
<p><em>Figure 1</em></p>
<h4 id="connecting-using-our-wifi-libraries">Connecting Using Our WiFi Libraries<a class="headerlink" href="#connecting-using-our-wifi-libraries" title="Permanent link"></a></h4>
<p>Now that you know how to connect to an access point by typing each command it&rsquo;s time to use the libraries and examples we provide.</p>
<p>To see code required to connect to an access point go to “File -&gt; Examples -&gt; Wifi_Shield -&gt; wifi_test”. Change the code to use your own SSID (access point name), and KEY (your access point&rsquo;s password), then upload the sketch to your Arduino IDE.</p>
<pre><code>#define SSID      " SEEED-MKT "
#define KEY       " seeed-mkt "
</code></pre>
<p>With the sketch uploaded to your Arduino board, open the serial monitor window. If the shield was successful in joining the access point an &ldquo;OK&rdquo; message will be displayed along with the connection information resulting from the &ldquo;get everything&rdquo; command. If the shield failed to join the access point a &ldquo;Failed&rdquo; message will be displayed.</p>
<h4 id="configuring-the-shield-to-connect-on-power-up">Configuring The Shield to Connect On Power-Up<a class="headerlink" href="#configuring-the-shield-to-connect-on-power-up" title="Permanent link"></a></h4>
<p>The shield can be configured to connect on power up, you only have to do this once:</p>
<ol>
<li>Send the &ldquo;set wlan ssid mySSID&rdquo; command replacing mySSID with your SSID</li>
<li>Send the &ldquo;set wlan join 1&rdquo; command.</li>
<li>Send the &ldquo;save&rdquo; command.</li>
</ol>
<p>Now the shield will connect to the access point automatically on power up.</p>
<p>A description of what each command does can be found in the RN-171 datasheet and in the table below.</p>
<table>
<thead>
<tr>
<th>Number</th>
<th>Commands</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>set wlan ssid <ssid></td>
<td>&ldquo;<ssid>&rdquo; is the name of the access point you&rsquo;d like to connect to automatically</td>
</tr>
<tr>
<td>2</td>
<td>set wlan join 1</td>
<td>This tells the module to try and connect to the SSID stored in memory automatically.</td>
</tr>
<tr>
<td>3</td>
<td>save</td>
<td>Store/Save these settings in the Wifi&rsquo;s config file</td>
</tr>
</tbody>
</table>
<h4 id="setting-a-static-ip-address">Setting a Static IP Address<a class="headerlink" href="#setting-a-static-ip-address" title="Permanent link"></a></h4>
<p>To have the shield obtain a static IP address from the access point, once connected to the access point, send the following commands:</p>
<table>
<thead>
<tr>
<th>Number</th>
<th>Commands</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>set ip dhcp 0</td>
<td>Turn of DHCP .</td>
</tr>
<tr>
<td>2</td>
<td>set ip address <address></td>
<td>Set the IP address you want .</td>
</tr>
</tbody>
</table>
<h4 id="example-4-easy-adhoc-mode">Example 4 [EASY]: Adhoc Mode<a class="headerlink" href="#example-4-easy-adhoc-mode" title="Permanent link"></a></h4>
<p>To use the shield in Adhoc mode, as an access point, simply connect pin IO9 from the shield to the 3.3V pin in the Arduino, as shown below, and reset the shield if it was on.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Wifi-shield-adhoc-mode-hardware-connection.png" /></p>
<p><em>Shield connection required for adhoc mode. Pin IO9 of the shield connected to 3.3V.</em></p>
<p>To obtain the shield&rsquo;s SSID upload the code in Example 1 to your Arduino and open the serial monitor, the shield will respond with it&rsquo;s SSID as in the example below, where in this case <strong>WiFly-EZX-1b</strong> is the SSID.</p>
<pre><code>AP mode as WiFly-EZX-1b on chan 1
</code></pre>
<p>You should now be able to connect to your WiFi shield as an access point, for example the SSID should be visible in your PC&rsquo;s list of WiFi networks available.</p>
<p>To learn more about adhoc mode check out the <a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/WiFly-RN-UM.pdf">WiFly RN User Manual</a> section 16 &ldquo;Adhoc Networking Mode&rdquo;</p>
<h4 id="example-5-mid-tcp-communication-with-terminal">Example 5 [MID]: TCP Communication With Terminal<a class="headerlink" href="#example-5-mid-tcp-communication-with-terminal" title="Permanent link"></a></h4>
<p>In this example we&rsquo;ll show you how to send information from the WiFi shield to a PC terminal program. We&rsquo;ll make a simple Arduino console with menus that will give you the option to see the Arduino digital pin&rsquo;s state and toggle them.</p>
<p><strong>Step 1: Download a TCP Terminal</strong></p>
<p><a href="http://sourceforge.net/projects/realterm/files/Realterm/2.0.0.70/Realterm_2.0.0.70_setup.exe/download">Download and install RealTerm</a>, a utility terminal that will allow us to connect to the WiFi shield.</p>
<p><strong>Step 2: Arduino Code</strong></p>
<p>Upload the code below to your Arduino board replacing &ldquo;mySSID&rdquo;, &ldquo;myPassword&rdquo;, and authentication code with your own access point&rsquo;s information:</p>
<pre><code class="c">
    #include &lt;SoftwareSerial.h&gt;
    #include &quot;WiFly.h&quot;

    #define SSID      &quot;mySSID&quot;
    #define KEY       &quot;myPassword&quot;
// check your access point's security mode, mine was WPA20-PSK
// if yours is different you'll need to change the AUTH constant, see the file WiFly.h for avalable security codes
    #define AUTH      WIFLY_AUTH_WPA2_PSK

    #define FLAG_MAIN_MENU 1
    #define FLAG_SUB_MENU_2 2

int flag = FLAG_MAIN_MENU;

// Pins' connection
// Arduino       WiFly
//  2    &lt;----&gt;    TX
//  3    &lt;----&gt;    RX

SoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object
WiFly wifly(&amp;wiflyUart); // pass the wifi siheld serial object to the WiFly class

void setup()
{

    // define the pins we can control
    pinMode(11,OUTPUT);
    digitalWrite(11,LOW);

    pinMode(12,OUTPUT);
    digitalWrite(12,LOW);

    pinMode(13,OUTPUT);
    digitalWrite(13,LOW);

    pinMode(7,OUTPUT);
    digitalWrite(7,LOW);

    wiflyUart.begin(9600); // start wifi shield uart port

    Serial.begin(9600); // start the arduino serial port
    Serial.println(&quot;--------- TCP Communication --------&quot;);

    // wait for initilization of wifly
    delay(1000);

    wifly.reset(); // reset the shield
    delay(1000);

    wifly.sendCommand(&quot;set ip local 80\r&quot;); // set the local comm port to 80
    delay(100);

    wifly.sendCommand(&quot;set comm remote 0\r&quot;); // do not send a default string when a connection opens
    delay(100);

    wifly.sendCommand(&quot;set comm open *\r&quot;); // set the string or character that the wifi shield will output when a connection is opened &quot;*&quot;
    delay(100);

    wifly.sendCommand(&quot;set ip protocol 2\r&quot;); // set TCP protocol
    delay(100);

    Serial.println(&quot;Join &quot; SSID );
    if (wifly.join(SSID, KEY, AUTH)) {
        Serial.println(&quot;OK&quot;);
    } else {
        Serial.println(&quot;Failed&quot;);
    }

    wifly.sendCommand(&quot;get ip\r&quot;);
    char c;

    while (wifly.receive((uint8_t *)&amp;c, 1, 300) &gt; 0) { // print the response from the get ip command
        Serial.print((char)c);
    }

    Serial.println(&quot;TCP Ready&quot;);
}

void loop()
{

    if(wifly.available())
    {
        delay(1000); // wait for all the characters to be sent to the WiFi shield
        char val = wiflyUart.read(); // read the first character

        if(flag == FLAG_MAIN_MENU)
        {
            switch(val)
            {
                case '*': // search for the new connection string
                printMainMenu();
                break;
                case '1': // the user typed 1, display the pin states
                printPinStates();
                printMainMenu();
                break;
                case '2': // the user typed 2, display the sub menu (option to select a particular pin)
                printSubMenu2();
                flag = FLAG_SUB_MENU_2; // flag to enter the sub menu
                break;
                default:
                wiflyUart.print(&quot;INVALID SUBMENU\r\n&quot;);
                break;
            }
        }
        else if(flag == FLAG_SUB_MENU_2)
        {
            int pinNumber = val-48; // get first number i.e. if the pin 13 then the 1st number is 1
            int secondNumber = (wiflyUart.read()-48);
            if(secondNumber&gt;=0 &amp;&amp; secondNumber&lt;=9)
            {
                pinNumber*=10;
                pinNumber +=secondNumber; // get second number, i.e. if the pin number is 13 then the 2nd number is 3, then add to the first number
            }

            // Create the &quot;You want to toggle pin x?? OK...&quot; string.
            String response = &quot;\r\nYou want to toggle pin &quot;;
            response+=pinNumber;
            response+=&quot;? OK...\r\n&quot;;

            wiflyUart.print(response);

            digitalWrite(pinNumber, !digitalRead(pinNumber)); // toggle pin

            wiflyUart.print(&quot;Pin Toggled!\r\n&quot;); // let user know the pin was toggled.
            printMainMenu();
            flag = FLAG_MAIN_MENU;
        }
    }

}

    /*
    * Prints the main menu options
    */
void printMainMenu()
{
    wiflyUart.print(&quot;\r\n\r\n&quot;);
    wiflyUart.print(&quot;Arduino Console Menu: \r\n&quot;);
    wiflyUart.print(&quot;1. Show digital pin states\r\n&quot;);
    wiflyUart.print(&quot;2. Toggle a digital pin's state\r\n&quot;);
    wiflyUart.print(&quot;\r\n\r\n&quot;);
}

// displays the pin states
void printPinStates()
{

    String pinState = &quot;Pin 7 is &quot;;
    pinState+=getPinState(7);
    pinState+=&quot;\r\n&quot;;

    pinState += &quot;Pin 11 is &quot;;
    pinState+=getPinState(11);
    pinState+=&quot;\r\n&quot;;

    pinState += &quot;Pin 12 is &quot;;
    pinState+=getPinState(12);
    pinState+=&quot;\r\n&quot;;

    pinState += &quot;Pin 13 is &quot;;
    pinState+=getPinState(13);
    pinState+=&quot;\r\n&quot;;

    wiflyUart.print(pinState);
}

// prints the option to enter a pin number
void printSubMenu2()
{
    wiflyUart.print(&quot;\r\nEnter the pin number you wish to toggle: &quot;);
}
?
// get a pin state as a string.
String getPinState(int pinNumber)
{
    if(digitalRead(pinNumber)) // check if the pin is ON or OFF
    {
        return &quot;ON&quot;; // the pin is on
    }
    else
    {
        return &quot;OFF&quot;;  // the pin is off
    }
}
</code></pre>

<p><strong>Step 3: Obtain the Shield&rsquo;s IP Address and Port</strong></p>
<p>Open the Arduino serial monitor window to obtain the WiFiShield&rsquo;s IP address and port number, highlighted in the image below.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Tcp-arduino-serial-comm.png" /></p>
<p><em>Arduino serial monitor window output from TCP example, the ip address and port number are highlighted.</em></p>
<p>In the image above the IP Address and Port would be the following:</p>
<pre><code>192.168.0.10:80
</code></pre>
<p><strong>Step 4: Configure The TCP Terminal and Connect to The Shield</strong></p>
<p>Open RealTerm and in the &ldquo;Display&rdquo; tab enter &ldquo;30&rdquo; for &ldquo;Rows&rdquo; and select the &ldquo;Scrollback&rdquo; option:</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Realterm-display-tab.png" /></p>
<p><em>RealTerm window: rows = 30, and Scrollback option checked.</em></p>
<p>In the &ldquo;Port&rdquo; tab of the RealTerm program, type your shield&rsquo;s IP address and port e.g. 192.168.0.10:80, then click the &ldquo;Open&rdquo; button, the Arduino&rsquo;s hard coded main menu should display in the terminal.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Realterm-port-tab.png" /></p>
<p><em>RealTerm window. Port field has WiFi shield&rsquo;s IP address and port number. The Arduino&rsquo;s menu is displayed</em></p>
<p>In the &ldquo;Send&rdquo; tab select one of the options from the menu either &ldquo;1&rdquo; or &ldquo;2&rdquo;, enter it in the text box and press &ldquo;Send ASCII&rdquo; to send the value.</p>
<p>For example, to toggle pin 13 enter &ldquo;2&rdquo; and press &ldquo;Send ASCII&rdquo;, then when prompted &ldquo;Enter the pin number you wish you toggle&rdquo; enter &ldquo;13&rdquo; and click &ldquo;Send ASCII&rdquo;. The Arduino should reply &ldquo;Pin Toggled!&rdquo; and go back to the main menu, now enter &ldquo;1&rdquo; and press &ldquo;Send ASCII&rdquo; to see the present state of the pins.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Realterm-send-tab.png" /></p>
<p><em>RealTerm window. The state of pin 13 was changed from OFF to ON as shown in the yellow text.</em></p>
<h3 id="advanced-example">Advanced example<a class="headerlink" href="#advanced-example" title="Permanent link"></a></h3>
<h4 id="project-1-mid-use-webandroid-app-to-control-the-led">Project 1 [MID]: Use Web/Android APP to control the LED<a class="headerlink" href="#project-1-mid-use-webandroid-app-to-control-the-led" title="Permanent link"></a></h4>
<p><strong>Step One: Arduino Code</strong></p>
<p>Upload the following code to your Arduino board replacing &ldquo;myssid&rdquo; and &ldquo;mypassword&rdquo; with your accesspoint&rsquo;s values respectively:</p>
<pre><code class="c">    #include &lt;SoftwareSerial.h&gt;
    #include &quot;WiFly.h&quot;

    #define SSID      &quot;myssid&quot;
    #define KEY       &quot;mypassword&quot;
// check your access point's security mode, mine was WPA20-PSK
// if yours is different you'll need to change the AUTH constant, see the file WiFly.h for avalable security codes
    #define AUTH      WIFLY_AUTH_WPA2_PSK

int flag = 0;

// Pins' connection
// Arduino       WiFly
//  2    &lt;----&gt;    TX
//  3    &lt;----&gt;    RX

SoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object
WiFly wifly(&amp;wiflyUart); // pass the wifi siheld serial object to the WiFly class

void setup()
{
    wiflyUart.begin(9600); // start wifi shield uart port
    Serial.begin(9600); // start the arduino serial port
    Serial.println(&quot;--------- WIFLY Webserver --------&quot;);

    // wait for initilization of wifly
    delay(1000);

    wifly.reset(); // reset the shield
    delay(1000);
    //set WiFly params

    wifly.sendCommand(&quot;set ip local 80\r&quot;); // set the local comm port to 80
    delay(100);

    wifly.sendCommand(&quot;set comm remote 0\r&quot;); // do not send a default string when a connection opens
    delay(100);

    wifly.sendCommand(&quot;set comm open *OPEN*\r&quot;); // set the string that the wifi shield will output when a connection is opened
    delay(100);

    Serial.println(&quot;Join &quot; SSID );
    if (wifly.join(SSID, KEY, AUTH)) {
        Serial.println(&quot;OK&quot;);
    } else {
        Serial.println(&quot;Failed&quot;);
    }

    wifly.sendCommand(&quot;get ip\r&quot;);
    char c;

    while (wifly.receive((uint8_t *)&amp;c, 1, 300) &gt; 0) { // print the response from the get ip command
        Serial.print((char)c);
    }

    Serial.println(&quot;Web server ready&quot;);

}

void loop()
{

    if(wifly.available())
    { // the wifi shield has data available
        if(wiflyUart.find(&quot;*OPEN*&quot;)) // see if the data available is from an open connection by looking for the *OPEN* string
        {
            Serial.println(&quot;New Browser Request!&quot;);
            delay(1000); // delay enough time for the browser to complete sending its HTTP request string
            // send HTTP header
            wiflyUart.println(&quot;HTTP/1.1 200 OK&quot;);
            wiflyUart.println(&quot;Content-Type: text/html; charset=UTF-8&quot;);
            wiflyUart.println(&quot;Content-Length: 244&quot;); // length of HTML code
            wiflyUart.println(&quot;Connection: close&quot;);
            wiflyUart.println();

            // send webpage's HTML code
            wiflyUart.print(&quot;&lt;html&gt;&quot;);
            wiflyUart.print(&quot;&lt;head&gt;&quot;);
            wiflyUart.print(&quot;&lt;title&gt;My WiFI Shield Webpage&lt;/title&gt;&quot;);
            wiflyUart.print(&quot;&lt;/head&gt;&quot;);
            wiflyUart.print(&quot;&lt;body&gt;&quot;);
            wiflyUart.print(&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;);
            wiflyUart.print(&quot;&lt;h3&gt;This website is served from my WiFi module&lt;/h3&gt;&quot;);
            wiflyUart.print(&quot;&lt;a href=\&quot;http://yahoo.com\&quot;&gt;Yahoo!&lt;/a&gt; &lt;a href=\&quot;http://google.com\&quot;&gt;Google&lt;/a&gt;&quot;);
            wiflyUart.print(&quot;&lt;br/&gt;&lt;button&gt;My Button&lt;/button&gt;&quot;);
            wiflyUart.print(&quot;&lt;/body&gt;&quot;);
            wiflyUart.print(&quot;&lt;/html&gt;&quot;);
        }
    }
}
</code></pre>

<p><strong>Step Two: Get the Shield&rsquo;s IP Address</strong></p>
<p>Open the serial monitor window and wait for the &ldquo;Web server ready&rdquo; message to display. The serial monitor will also display the WiFi shield&rsquo;s IP address:</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Wifi-shield-led-control-serial-comm-window.png" /></p>
<p><em>Arduino program serial comm output. The IP address of the shield is highlighted.</em></p>
<p><strong>Step Three: Visiting the webpage</strong></p>
<p>Now visit that IP address in your web browser. The webpage below should be displayed, it contains a link to Yahoo! and Google and a button that doesn&rsquo;t do anything (yet):</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Wifi-shield-simple-webserver-page.png" /></p>
<p><em>A simple webpage with two links and one button served from the WiFi shield.</em></p>
<p>When the webpage is visited the serial monitor window will also display a &ldquo;New Browser Request!&rdquo; string as shown below:</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Wifi-shield-simple-webserver-arduino-serial-window-response.png" /></p>
<p><em>The Arduino serial comm window showing that it detected a new browser connection/request.</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
In case of some browsers, like Google Chrome, even typing the URL in the bar sends a webpage request, this is because these browsers try to get the webpage's title for the user's convenience even before he/she visits the webpage.
</div>

<ul>
<li>Project 2 [HARD]: Get the weather data from the external web server
The RN-171 module in the WiFi shield has the ability to act as an HTML client (a text based web browser essentially), this means that we can use the shield to send and receive data from a web server. In this example you will learn to use the shield with a web Application Programming Interface (API) that displays any city&rsquo;s weather data (i.e. temperature, humidity, etc).</li>
</ul>
<p>The name of the API we&rsquo;ll use is <a href="http://openweathermap.org/api">OpenWeatherMap</a>, when you send the name of a city and country to this website it returns a JSON string with weather information.  If you want to display the weather for London UK for example, please refer to the toturial in this link http://openweathermap.org/appid .Starting from 9 Oct 2015, the website requires users to sign up for a API key before visiting the API. Once you have got the API key, you will be able to visit the following URL http://api.openweathermap.org/data/2.5/weather?q=London,uk which would return a JSON string like the following, where the weather data and other information is embedded.</p>
<pre><code>{
    &quot;coord&quot;:{&quot;lon&quot;:-0.13,&quot;lat&quot;:51.51},
    &quot;sys&quot;:{&quot;type&quot;:3,&quot;id&quot;:60992,&quot;message&quot;:0.0079,&quot;country&quot;:&quot;GB&quot;,&quot;sunrise&quot;:1421395087,&quot;sunset&quot;:1421425352},
    &quot;weather&quot;:[{&quot;id&quot;:802,&quot;main&quot;:&quot;Clouds&quot;,&quot;description&quot;:&quot;scattered clouds&quot;,&quot;icon&quot;:&quot;03n&quot;}],
    &quot;base&quot;:&quot;cmc stations&quot;,
    &quot;main&quot;:{
        &quot;temp&quot;:277.25,&quot;humidity&quot;:79,&quot;pressure&quot;:998.4,
        &quot;temp_min&quot;:277.25,&quot;temp_max&quot;:277.25
    },
    &quot;wind&quot;:{
    &quot;speed&quot;:2,&quot;gust&quot;:5,&quot;deg&quot;:180},
    &quot;rain&quot;:{&quot;3h&quot;:0},&quot;clouds&quot;:{&quot;all&quot;:32},
    &quot;dt&quot;:1421372140,&quot;id&quot;:2643743,&quot;name&quot;:&quot;London&quot;,&quot;cod&quot;:200
}
</code></pre>

<p><strong>Step 1: The URL</strong></p>
<p>Let us go ahead and retrieve the weather JSON string for San Francisco, US. The URL our WiFi shield needs to visit is the following (you may test it in your web browser):</p>
<pre><code>http://api.openweathermap.org/data/2.5/weather?q=San%20Francisco,US
</code></pre>
<p><strong>Step 2: The Arduino Code</strong></p>
<p>Section 13 of the <a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/WiFly-RN-UM.pdf">WiFly manual</a> teaches you different ways to connect to a web server, but in all cases we need to specify the name of the server (or IP address if the server does not have a domain name), and then the data we wish to send.</p>
<p>The commands we need to send to the WiFi shield to receive the JSON string from the OpenWeatherMap server are the following:</p>
<pre><code>set ip proto 18 //enable html client
set dns name api.openweathermap.org //name of your webserver
set ip address 0 // so WiFly will use DNS
set ip remote 80 // standard webserver port
set com remote 0 // turn off the REMOTE string so it does not interfere with the post 
open // to open the connection
GET /data/2.5/weather?q=San%20Francisco,US \n\n // to send the data
</code></pre>
<p>This is the arduino code that will send the commands:</p>
<pre><code class="c">    #include &lt;SoftwareSerial.h&gt;
    #include &quot;WiFly.h&quot;

    #define SSID      &quot;mySSID&quot;
    #define KEY       &quot;myPassword&quot;
// check your access point's security mode, mine was WPA20-PSK
// if yours is different you'll need to change the AUTH constant, see the file WiFly.h for avalable security codes
    #define AUTH      WIFLY_AUTH_WPA2_PSK

// Pins' connection
// Arduino       WiFly
//  2    &lt;----&gt;    TX
//  3    &lt;----&gt;    RX

SoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object
WiFly wifly(&amp;wiflyUart); // pass the wifi siheld serial object to the WiFly class

void setup()
{
    wiflyUart.begin(9600); // start wifi shield uart port
    Serial.begin(9600); // start the arduino serial port
    Serial.println(&quot;--------- OpenWeatherMap API --------&quot;);

    // wait for initilization of wifly
    delay(3000);
    wifly.reset(); // reset the shield
    Serial.println(&quot;Join &quot; SSID );
    if (wifly.join(SSID, KEY, AUTH)) {
        Serial.println(&quot;OK&quot;);
    } else {
        Serial.println(&quot;Failed&quot;);
    }

    wifly.sendCommand(&quot;set ip proto 18\r&quot;); //enable html client
    delay(100);

    wifly.sendCommand(&quot;set dns name api.openweathermap.org\r&quot;); // name of the webserver we want to connect to
    delay(100);

    wifly.sendCommand(&quot;set ip address 0\r&quot;); // so WiFly will use DNS
    delay(100);

    wifly.sendCommand(&quot;set ip remote 80\r&quot;); /// standard webserver port
    delay(100);

    wifly.sendCommand(&quot;set com remote 0\r&quot;); // turn off the REMOTE string so it does not interfere with the post
    delay(100);

    wifly.sendCommand(&quot;open\r&quot;); // open connection
    delay(100);

    wiflyUart.print(&quot;GET /data/2.5/weather?q=San%20Francisco,US \n\n&quot;);
    delay(1000);

}

void loop()
{
    //As soon as the data  received from the Internet ,output the data through the UART Port .
    while (wifly.available())
    {
        Serial.write(wifly.read());
    }
}
</code></pre>

<p><strong>Step 3: Result</strong></p>
<p>Open the serial monitor window, you should be able to see the same JSON string you saw in the browser.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/img/Open-weather-api-json-string.png" /></p>
<p><em>JSON weather string shown in the Arduino serial monitor window.</em></p>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link"></a></h2>
<ul>
<li><a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/Wifi_Shield_v2.0.zip">WiFi Shield V2.0 Eagle Files</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/Wifi_shield_v2_schematic.pdf">Schematic PDF</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/WiFly-RN-171.pdf">RN-171 Datasheet</a></li>
<li><a href="https://github.com/Seeed-Studio/WiFi_Shield">Wifi Shield Library</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDocument/Wifi_Shield_V2.0/master/res/WiFly-RN-UM.pdf">WiFi Module User Manual</a> <em>&ndash; This is where you&rsquo;ll find all the commands for the RN-171 module in the shield.</em></li>
<li><a href="../Seeeduino_v4.2">What is a Seeeduino</a></li>
<li><a href="http://www.w3schools.com/">w3schools</a> Great website to learn HTML, Javascript, and JQuery</li>
</ul>

                <h2 id="help-us-make-it-better">Help us make it better<a class="headerlink" href="#help-us-make-it-better" title="Permanent link"></a></h2>
<p>Thank you for choosing <a href="http://www.seeed.cc">Seeed</a>. A couple of months ago we initiated a project to improve our documentation system. What you are looking at now is the first edition of the new documentation system. Comparing to the old one, here is the progresses that we made:</p>

<ul>
<li>Replaced the old documentation system with a new one that was developed from Mkdocs, a more widely used and cooler tool to develop documentation system.</li>
<li>Integrated the documentation system with our official website, now you can go to Bazaar and other section like Forum and Community more conveniently. </li>
<li>Reviewed and rewrote documents for hundreds of products for the system’s first edition, and will continue migrate documents from old wiki to the new one.</li>
</ul>

<p>An easy-to-use instruction is as important as the product itself. We are expecting this new system will improve your experience when using Seeed’s products. However since this is the first edition, there are still many things need to improve, if you have any suggestions or findings, you are most welcome to submit the amended version as our contributor or give us suggestions in the survey below, Please don’t forget to leave your email address so that we can reply.</p>

<p>Happy hacking</p>

                <iframe style="height: 600px; width: 700px; margin: 10px 0 10px;" allowTransparency="true" src="https://www.research.net/r/Wifi_Shield_V2_0" frameborder="0"></iframe></iframe>
   
              
            </div>
          </div>
          
        </div>

      </div>

    </section>

  </div>


</body>
</html>


<script>
    /*!
      * jQuery Cookie Plugin v1.4.1
      * https://github.com/carhartl/jquery-cookie
      *
      * Copyright 2013 Klaus Hartl
      * Released under the MIT license
      */
     ; (function(factory) {
         if (typeof define === 'function' && define.amd) {
           // AMD
           define(['jquery'], factory);
         } else if (typeof exports === 'object') {
           // CommonJS
           factory(require('jquery'));
         } else {
           // Browser globals
           factory(jQuery);
         }
       }(function($) {

         var pluses = /\+/g;

         function encode(s) {
           return config.raw ? s : encodeURIComponent(s);
         }

         function decode(s) {
           return config.raw ? s : decodeURIComponent(s);
         }

         function stringifyCookieValue(value) {
           return encode(config.json ? JSON.stringify(value) : String(value));
         }

         function parseCookieValue(s) {
           if (s.indexOf('"') === 0) {
             // This is a quoted cookie as according to RFC2068, unescape...
             s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
           }

           try {
             // Replace server-side written pluses with spaces.
             // If we can't decode the cookie, ignore it, it's unusable.
             // If we can't parse the cookie, ignore it, it's unusable.
             s = decodeURIComponent(s.replace(pluses, ' '));
             return config.json ? JSON.parse(s) : s;
           } catch (e) {}
         }

         function read(s, converter) {
           var value = config.raw ? s : parseCookieValue(s);
           return $.isFunction(converter) ? converter(value) : value;
         }

         var config = $.cookie = function(key, value, options) {

           // Write

           if (value !== undefined && !$.isFunction(value)) {
             options = $.extend({}, config.defaults, options);

             if (typeof options.expires === 'number') {
               var days = options.expires,
                 t = options.expires = new Date();
               t.setTime(+t + days * 864e+5);
             }

             return (document.cookie = [
               encode(key), '=', stringifyCookieValue(value),
               options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
               options.path ? '; path=' + options.path : '',
               options.domain ? '; domain=' + options.domain : '',
               options.secure ? '; secure' : ''
             ].join(''));
           }

           // Read

           var result = key ? undefined : {};

           // To prevent the for loop in the first place assign an empty array
           // in case there are no cookies at all. Also prevents odd result when
           // calling $.cookie().
           var cookies = document.cookie ? document.cookie.split('; ') : [];

           for (var i = 0, l = cookies.length; i < l; i++) {
             var parts = cookies[i].split('=');
             var name = decode(parts.shift());
             var cookie = parts.join('=');

             if (key && key === name) {
               // If second argument (value) is a function it's a converter...
               result = read(cookie, value);
               break;
             }

             // Prevent storing a cookie that we couldn't decode.
             if (!key && (cookie = read(cookie)) !== undefined) {
               result[name] = cookie;
             }
           }

           return result;
         };

         config.defaults = {};

         $.removeCookie = function(key, options) {
           if ($.cookie(key) === undefined) {
             return false;
           }

           // Must not alter options, thus extending a fresh object...
           $.cookie(key, '', $.extend({}, options, {
             expires: -1
           }));
           return !$.cookie(key);
         };

       }));


      $(function(){
         //接入返回顶部按钮
         backToTop(1000);
         $('.wy-menu-vertical li.current').find('i').removeClass("fa-caret-right").addClass("fa-caret-down");


         // 记录词条点击位置
         $('.wy-menu-vertical .current').find('a').unbind('click').click(function(){
           var  scrollTop = $('.wy-nav-side').scrollTop();
            $.cookie('wike_scroll', scrollTop, {
               expires: 1,
               path: "/"
             });

         });

         var scrollTop = $.cookie('wike_scroll');
         $('.wy-nav-side').scrollTop(scrollTop);
         $.removeCookie("wike_scroll",{});





      });

           /*
      * 返回顶部
      * @param {string} show_target, 滚动出现目标（可为空
      * @param {string} to_top, 返回顶部按钮
      * @param {number} speed, 滚动速度
      */
     function backToTop(speed) {

       //添加html到文档里
       var _top_ico = '<a href="#" class="back-to-top" title="Back to top"><i class="fa fa-angle-up"></i></a>';
       $('#footer').after(_top_ico);

       //    var s_width = $(window).width(),
       //        base_width = 1200;
       //    if(s_width > base_width) {
       //        var fixed_right = parseInt((s_width-base_width)/2);
       //        //console.log('右侧距离是：'+fixed_right);
       //        $('.back-to-top').css('right',(fixed_right-100)+'px');
       //    }

       var $top = $('.back-to-top');
       if ($top != "") {
         $(window).scroll(function() {
           if ($(this).scrollTop() != 0) {
             $top.show();
           } else {
             $top.fadeOut(200);
           }
         });
       }
       $top.click(function() {
         $("body,html").animate({
           scrollTop: 0
         }, speed);
         return false;
       });
     }
     
    </script>